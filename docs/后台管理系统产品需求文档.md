# StockDEX 后台管理系统产品需求文档（PRD）

**文档版本**: V1.0  
**创建日期**: 2025年1月  
**产品类型**: 后台管理系统 - StockDEX去中心化股票代币交易平台  
**目标用户**: 平台运营人员、风控人员、财务人员  
**核心功能**: 用户管理、订单管理、资金管理、交易对管理、运营管理等

---

## 📋 目录

### 第一部分：产品概述
1. [需求背景](#1-需求背景)
2. [功能列表](#2-功能列表)
3. [用户角色](#3-用户角色)

### 第二部分：核心功能模块
4. [首页看板](#4-首页看板)
5. [用户管理](#5-用户管理)
6. [交易对管理](#6-交易对管理)
7. [订单管理](#7-订单管理)
8. [充值管理](#8-充值管理)
9. [提现管理](#9-提现管理)
10. [资金管理](#10-资金管理)
11. [资金明细](#11-资金明细)
12. [理财管理](#12-理财管理)
13. [运营管理](#13-运营管理)

### 第三部分：业务流程与规则
14. [核心业务流程](#14-核心业务流程)
15. [业务规则](#15-业务规则)
16. [异常处理](#16-异常处理)

### 第四部分：附录
17. [测试要点](#17-测试要点)
18. [术语表](#18-术语表)
19. [更新记录](#19-更新记录)

---

## 1. 需求背景

### 1.1 为什么需要后台管理系统

**现状问题**：
- 平台运营需要统一的管理入口，查看平台数据、管理用户、处理订单
- 风控人员需要实时监控用户账户状态，及时处理异常情况
- 财务人员需要查看充提记录，进行资金对账
- 运营人员需要管理交易对、配置参数、发布公告

**目标**：
- 提供统一的后台管理平台，支持多角色权限管理
- 实时监控平台核心数据指标
- 高效处理用户、订单、资金等业务操作
- 支持数据导出和统计分析

### 1.2 核心价值

- ✅ **统一管理**：一个平台管理所有业务模块
- ✅ **实时监控**：实时查看平台数据和用户状态
- ✅ **高效操作**：快速处理用户问题、审核订单
- ✅ **数据透明**：完整的数据记录和导出功能

---

## 2. 功能列表

### 2.1 核心功能模块

| 模块 | 功能 | 说明 |
|------|------|------|
| **首页看板** | 数据概览 | 展示平台核心数据指标 |
| **用户管理** | 用户查询、禁用/启用 | 管理用户账户，查看用户信息 |
| **交易对管理** | 上架/下架、手续费配置 | 管理交易对参数和状态 |
| **订单管理** | 普通订单、条件订单 | 查询订单、查看成交明细 |
| **充值管理** | 充值记录查询 | 查看用户充值记录和状态 |
| **提现管理** | 提现记录查询、审核 | 查看和处理用户提现申请 |
| **资金管理** | 持仓对账 | 查看用户持仓余额和对账信息 |
| **资金明细** | 资金流水查询 | 查看用户资金变动记录 |
| **理财管理** | 币种配置、记录、统计 | 管理理财产品相关数据 |
| **运营管理** | Banner、公告、反馈 | 管理平台运营内容 |

---

## 4. 首页看板

### 4.1 功能概述

首页看板展示平台核心数据指标，帮助管理员快速了解平台运营状况。

### 4.2 数据指标

**昨日数据卡片**：

| 指标 | 说明 | 展示内容 |
|------|------|---------|
| **昨日注册人数** | 前一日新增注册用户数 | 数量 + 较前日增长率 |
| **昨日交易额** | 前一日总交易额（USDT） | 金额 + 较前日增长率 |
| **昨日订单数** | 前一日总订单数 | 数量 + 较前日增长率 |
| **昨日充值** | 前一日总充值金额（USDT） | 金额 + 较前日增长率 |
| **昨日提现** | 前一日总提现金额（USDT） | 金额 + 较前日增长率 |

**数据展示规则**：
- 统计时间：昨日数据以24时（0点）为准统计一次，统计范围为前一日00:00:00至23:59:59的数据
- 增长率 = (昨日数据 - 前日数据) / 前日数据 × 100%
- 增长率 > 0 显示绿色，< 0 显示红色
- 金额保留2位小数，数量保留整数

### 4.3 数据更新时间

- 数据每小时更新一次
- 显示最后更新时间："最后更新：YYYY-MM-DD HH:MM:SS"

---

## 5. 用户管理

### 5.1 功能概述

管理用户账户信息，查看用户资产、交易情况，支持禁用/启用用户交易。

### 5.2 搜索筛选

**筛选条件**：
- 用户ID：支持精确搜索
- 支持分页显示，默认每页20条

**搜索流程**：
```
用户输入用户ID
    ↓
点击"搜索"按钮
    ↓
系统查询用户信息
    ├─ 未找到 → 显示"未找到相关用户"
    └─ 找到 → 显示用户列表
```

### 5.3 用户列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **用户ID** | 用户唯一标识 | U001, U002... |
| **地址** | 钱包地址（钱包用户） | 完整地址，点击可复制 |
| **邮箱** | 邮箱地址（邮箱用户） | user@example.com，有则展示，无则不展示 |
| **注册时间** | 用户注册时间 | YYYY-MM-DD HH:MM:SS |
| **总估值** | 账户总资产估值（USDT） | 保留4位小数 |
| **总转入** | 累计充值金额（USDT） | 保留4位小数 |
| **总转出** | 累计提现金额（USDT） | 保留4位小数 |
| **已实现盈亏** | 已平仓盈亏（USDT） | 保留4位小数，正数显示+号 |
| **未实现盈亏** | 持仓盈亏（USDT） | 保留4位小数，正数显示+号 |
| **利息** | 累计支付利息（USDT） | 保留4位小数 |
| **状态** | 账户状态 | 正常/禁用交易 |
| **操作** | 操作按钮 | 禁用交易/查看 |

**数据展示规则**：
- 地址：钱包用户显示完整地址，点击地址可复制到剪贴板，复制成功后显示"已复制"提示
- 邮箱：邮箱用户显示邮箱地址，有则展示，无则不展示该字段（不显示"-"）
- 盈亏为正数时显示绿色，负数显示红色

### 5.4 禁用/启用用户

**禁用用户流程**：详细流程请参考 [14.1 用户禁用流程](#141-用户禁用流程)

**启用用户流程**：
```
点击"查看"按钮（禁用状态的用户）
    ↓
显示用户详情弹窗
    ├─ 显示禁用信息（时间、原因、管理员）
    └─ "启用交易"按钮
    ↓
点击"启用交易"
    ↓
弹出确认弹窗
    ├─ 输入身份验证器验证码（必填，6位）
    └─ 确认/取消按钮
    ↓
点击"确认启用"
    ↓
系统验证验证码
    ├─ 验证失败 → 显示"验证码错误"
    └─ 验证成功 ↓
更新用户状态为"正常"
    ↓
显示"启用成功"
    ↓
刷新用户列表
```

**业务规则**：
- 禁用用户后，用户无法进行交易操作（买入、卖出、下单）
- 禁用用户仍可查看账户、提现
- 禁用操作需要记录操作人、时间、原因
- 启用操作需要记录操作人、时间

---

## 6. 交易对管理

### 6.1 功能概述

管理平台上的所有交易对，包括上架、下架、手续费设置、查看详情等。

### 6.2 搜索筛选

**筛选条件**：
- 交易对/品种：支持模糊搜索（如输入"AAPL"或"AAPL-USDT"）
- 状态：全部/正常交易/下架中

**搜索流程**：
```
输入筛选条件
    ↓
点击"搜索"按钮
    ↓
系统查询交易对列表
    ↓
显示符合条件的交易对
```

### 6.3 交易对列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **序号** | 序号 | 1, 2, 3... |
| **交易对** | 交易对代码 | AAPL-USDT |
| **taker手续费** | 市价单手续费率 | 0.0008（表示0.08%） |
| **maker手续费** | 限价单手续费率 | 0（表示0%） |
| **交易币种** | 交易币种 | AAPL |
| **结算币种** | 结算币种 | USDT |
| **更新时间** | 最后更新时间 | YYYY-MM-DD HH:MM:SS |
| **当前状态** | 交易对状态 | 正常交易/下架中 |
| **操作** | 查看详情 | 链接 |
| **上下架操作** | 上架/下架 | 链接 |

**状态说明**：
- 正常交易：用户可以正常交易该交易对
- 下架中：用户无法下单，但可以平仓

### 6.4 添加交易对

**添加流程**：
```
点击"添加交易对"按钮
    ↓
弹出添加交易对弹窗
    ├─ 交易对代码（必填，格式：XXX-USDT）
    ├─ 交易币种（必填）
    ├─ 结算币种（必填，默认USDT）
    ├─ taker手续费率（必填，如0.0008）
    ├─ maker手续费率（必填，如0）
    ├─ 做多初始保证金率（必填，如0.20）
    ├─ 做多维持保证金率（必填，如0.15）
    ├─ 做空初始保证金率（必填，如0.25）
    ├─ 做空维持保证金率（必填，如0.20）
    ├─ 单笔最大交易金额（必填）
    └─ 确认/取消按钮
    ↓
点击"确认添加"
    ↓
系统验证必填项
    ├─ 验证失败 → 显示错误提示
    └─ 验证成功 ↓
检查交易对是否已存在
    ├─ 已存在 → 显示"交易对已存在"
    └─ 不存在 ↓
保存交易对配置
    ↓
显示"添加成功"
    ↓
关闭弹窗，刷新列表
```

### 6.5 查看详情

**详情展示**：
- 交易对基本信息（代码、币种、状态）
- 手续费配置（taker、maker）
- 保证金配置（做多/做空初始/维持保证金率）
- 交易限制（单笔最大交易金额）
- 更新时间

### 6.6 上架/下架

**上架流程**：
```
点击"上架"链接
    ↓
弹出确认弹窗
    ├─ 显示交易对代码
    └─ 确认/取消按钮
    ↓
点击"确认"
    ↓
更新交易对状态为"正常交易"
    ↓
显示"上架成功"
    ↓
刷新列表
```

**下架流程**：详细流程请参考 [14.2 交易对下架流程](#142-交易对下架流程)

**业务规则**：
- 下架后，用户无法新开仓，但可以平仓（正持仓）
- 下架时系统自动撤销所有进行中订单，订单标记为"系统撤单"
- 下架时系统自动市价全平所有负持仓（做空持仓）
- 下架操作需要记录操作人、时间、原因
- 上架操作需要记录操作人、时间

---

## 7. 订单管理

### 7.1 功能概述

管理平台上的所有订单，包括普通订单和条件订单的查询、统计、查看成交明细等。

### 7.2 普通订单管理

#### 7.2.1 搜索筛选

**筛选条件**：
- 用户ID：支持精确搜索
- 订单号：支持精确搜索
- 交易对：支持精确搜索
- 挂单类型：全部/限价单/市价单
- 订单状态：全部/待成交/已成交/已撤销
- 交易方向：全部/买入/卖出
- 日期范围：开始日期 - 结束日期

**搜索流程**：
```
输入筛选条件
    ↓
点击"搜索"按钮
    ↓
系统查询订单列表
    ↓
显示符合条件的订单
```

**导出功能**：详细说明请参考 [A. 数据导出格式](#a-数据导出格式)

#### 7.2.2 订单列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **序号** | 序号 | 1, 2, 3... |
| **用户ID** | 用户唯一标识 | U001 |
| **订单ID** | 订单唯一标识 | UUID格式 |
| **交易对代码** | 交易对 | AAPL-USDT |
| **订单类型** | 订单类型 | LIMIT/MARKET |
| **交易方向** | 买卖方向 | BUY/SELL |
| **订单状态** | 订单状态 | 待成交/已成交/已撤销 |
| **成交量** | 已成交数量 | 保留8位小数 |
| **成交额** | 已成交金额（USDT） | 保留8位小数 |
| **已实现盈亏** | 已实现盈亏（USDT） | 仅平仓单展示，保留4位小数，正数显示+号，非平仓单显示"-" |
| **下单时间** | 订单创建时间 | YYYY-MM-DD HH:MM:SS |
| **操作** | 查看成交明细 | 链接 |

**已实现盈亏计算规则**：
- 展示条件：仅在订单为平仓单时展示已实现盈亏，非平仓单显示"-"
- 计算公式：
  - 买单（平空）：已实现盈亏 = (成本价 - 成交均价) × 成交数量
  - 卖单（平多）：已实现盈亏 = (成交均价 - 成本价) × 成交数量
- 保留4位小数，正数显示+号，负数显示-号

**状态说明**：
- 待成交：订单已提交，等待成交
- 已成交：订单全部或部分成交
- 已撤销：用户主动撤销或系统撤销

#### 7.2.3 成交明细

**查看流程**：
```
点击"成交明细"链接
    ↓
弹出成交明细弹窗
    ├─ 订单信息
    │  ├─ 订单ID
    │  ├─ 交易对
    │  ├─ 订单类型
    │  └─ 交易方向
    ├─ 价格与数量
    │  ├─ 委托价
    │  ├─ 成交均价
    │  ├─ 委托数量
    │  ├─ 成交数量
    │  ├─ 委托金额
    │  ├─ 成交金额
    │  ├─ 成本价
    │  └─ 已实现盈亏
    └─ 逐笔成交记录（表格）
       ├─ 成交时间
       ├─ 成交价格
       ├─ 成交数量
       ├─ 成交金额
       ├─ 手续费（USDT）
       └─ 哈希（链上交易哈希）
    ↓
点击"关闭"按钮
    ↓
关闭弹窗
```

**逐笔成交记录表格**：
- 显示该订单的所有成交记录
- 手续费显示单位：USDT
- 哈希显示为0x开头的字符串，过长时显示省略号，鼠标悬停显示完整哈希

### 7.3 条件订单管理

#### 7.3.1 搜索筛选

**筛选条件**：
- 用户ID：支持精确搜索
- 订单号：支持精确搜索
- 交易对：支持精确搜索
- 订单类型：全部/止盈止损/双向止盈止损/移动止盈止损
- 订单状态：全部/待成交/已触发/已取消
- 交易方向：全部/买入/卖出
- 日期范围：开始日期 - 结束日期

#### 7.3.2 条件订单列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **用户ID** | 用户唯一标识 | U001 |
| **订单ID** | 订单唯一标识 | 数字ID |
| **交易对** | 交易对 | AAPL-USDT |
| **订单类型** | 条件订单类型 | 止盈止损/双向止盈止损/移动止盈止损 |
| **交易方向** | 买卖方向 | BUY/SELL |
| **订单状态** | 订单状态 | 待成交/已触发/已取消 |
| **下单时间** | 订单创建时间 | YYYY-MM-DD HH:MM:SS |
| **操作** | 查看详情 | 链接 |

**状态说明**：
- 待成交：条件订单已创建，等待触发条件
- 已触发：触发条件已满足，订单已执行
- 已取消：用户主动取消或系统取消

#### 7.3.3 查看详情

**详情展示**：
- 订单基本信息（订单ID、交易对、类型、方向、状态）
- 触发条件（止盈价、止损价等）
- 订单数量、价格
- 触发时间（如已触发）
- 取消原因（如已取消）

---

## 8. 充值管理

### 8.1 功能概述

管理用户数字货币充值记录，包括USDT和股票代币充值。

### 8.2 搜索筛选

**筛选条件**：
- 用户ID：支持精确搜索
- 币种：全部/USDT/AAPL/TSLA/MSFT/GOOGL/NVDA/AMZN/META
- 状态：全部/待确认/已确认/失败
- 时间范围：开始日期 - 结束日期

### 8.3 充值记录列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **充值订单号** | 充值订单唯一标识 | D001, D002... |
| **用户ID** | 用户唯一标识 | U001 |
| **币种** | 充值币种 | USDT/AAPL/TSLA... |
| **到账金额** | 实际到账数量 | 保留4位小数 |
| **充值时间** | 用户发起充值时间 | YYYY-MM-DD HH:MM:SS |
| **到账时间** | 充值确认到账时间 | YYYY-MM-DD HH:MM:SS（未到账显示"-"） |
| **状态** | 充值状态 | 完成/待确认/失败 |
| **操作** | 查看详情 | 按钮 |

**状态说明**：
- 完成：充值已确认到账
- 待确认：等待区块确认
- 失败：充值失败（地址错误、金额不足等）

### 8.4 查看详情

**详情展示**：
- 充值订单号
- 用户ID、地址/邮箱
- 币种、到账金额
- 充值地址（链上地址）
- 交易哈希（链上交易哈希）
- 充值时间、到账时间
- 状态、备注

---

## 9. 提现管理

### 9.1 功能概述

管理用户数字货币提现记录，包括USDT和股票代币提现。

### 9.2 搜索筛选

**筛选条件**：
- 用户ID：支持精确搜索
- 币种：全部/USDT/AAPL/TSLA/MSFT/GOOGL/NVDA/AMZN/META
- 状态：全部/待确认/已确认/失败
- 时间范围：开始日期 - 结束日期

### 9.3 提现记录列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **提现ID** | 提现订单唯一标识 | W001, W002... |
| **用户ID** | 用户唯一标识 | U001 |
| **币种** | 提现币种 | USDT/AAPL/TSLA... |
| **协议** | 提现网络 | ERC-20/TRC-20/BSC |
| **提现金额** | 提现数量 | 保留4位小数 |
| **手续费** | 提现手续费 | 保留4位小数 |
| **实际到账** | 实际到账数量 | 保留4位小数 |
| **提现地址** | 目标提现地址 | 完整地址，点击可复制 |
| **状态** | 提现状态 | 待确认/已确认/失败 |
| **申请时间** | 用户申请时间 | YYYY-MM-DD HH:MM:SS |
| **处理时间** | 系统处理时间 | YYYY-MM-DD HH:MM:SS（未处理显示"-"） |
| **操作** | 查看详情 | 按钮 |

**状态说明**：
- 待确认：等待系统审核和处理
- 已确认：提现已处理，已转账
- 失败：提现失败（余额不足、地址错误等）

### 9.4 查看详情

**详情展示**：
- 提现ID
- 用户ID、地址/邮箱
- 币种、协议、提现金额、手续费、实际到账
- 提现地址（完整地址）
- 交易哈希（链上交易哈希，如已处理）
- 申请时间、处理时间
- 状态、备注、审核人

---

## 10. 资金管理

### 10.1 功能概述

管理用户资金账户，查看持仓余额和对账信息，支持异常检测。

### 10.2 搜索筛选

**筛选条件**：
- 用户ID：支持精确搜索
- 币种：支持模糊搜索
- 显示异常：切换按钮，显示/隐藏余额异常的用户

**搜索流程**：
```
输入用户ID和币种
    ↓
点击"搜索"按钮
    ↓
系统查询用户持仓数据
    ↓
显示用户持仓列表
```

**显示异常功能**：
- 点击"显示异常"按钮，只显示余额差不为0的记录
- 再次点击，恢复显示所有记录

### 10.3 持仓对账列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **用户ID** | 用户唯一标识 | U001 |
| **币种** | 代币币种 | USDT/AAPL/TSLA... |
| **可用** | 可用余额 | 保留8位小数 |
| **冻结** | 冻结余额 | 保留8位小数 |
| **总余额** | 总余额（可用+冻结） | 保留8位小数 |
| **估值(USDT)** | 总余额按当前价格估值 | 保留8位小数 |
| **计算余额** | 根据交易记录计算的余额 | 保留8位小数 |
| **余额差** | 总余额 - 计算余额 | 保留8位小数，不为0时高亮显示 |

**对账规则**：
- 计算余额 = 根据所有交易记录（买入、卖出、充值、提现等）计算出的理论余额
- 余额差 = 总余额 - 计算余额
- 余额差不为0时，该行高亮显示（红色背景）
- 余额差为0时，正常显示

**导出功能**：详细说明请参考 [A. 数据导出格式](#a-数据导出格式)

---

## 11. 资金明细

### 11.1 功能概述

查看用户资金变动记录，包括交易、充值、提现、利息等所有资金流水。

### 11.2 搜索筛选

**筛选条件**：
- 用户ID：支持精确搜索
- 币种：支持模糊搜索
- 操作类型：全部/买入/卖出/充值/提现/利息/分红/拆股/合股/代码变更/理财申购/理财赎回/理财收益/其他
- 时间范围：开始日期 - 结束日期

**操作按钮**：
- 搜索：根据筛选条件查询资金明细
- 导出：导出当前筛选条件下的所有资金明细数据（CSV格式）
- 显示异常：切换按钮，点击后只显示余额差不为0的记录，再次点击恢复显示所有记录

### 11.3 资金明细列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **用户ID** | 用户唯一标识 | U001 |
| **币种** | 资金币种 | USDT/AAPL/TSLA... |
| **操作类型** | 资金变动类型 | 买入/卖出/充值/提现/利息/分红/拆股/合股/代码变更/理财申购/理财赎回/理财收益/其他 |
| **交易金额** | 变动金额（正数=增加，负数=减少） | 保留8位小数，正数显示+号 |
| **手续费** | 手续费金额 | 保留8位小数 |
| **手续费币种** | 手续费币种 | USDT/代币币种 |
| **时间** | 操作时间 | YYYY-MM-DD HH:MM:SS |
| **订单号** | 关联订单号 | 订单ID或"-" |
| **账户余额** | 操作后账户余额 | 保留8位小数 |
| **计算余额** | 根据交易记录计算的理论余额 | 保留8位小数 |
| **余额差** | 账户余额 - 计算余额 | 保留8位小数，不为0时高亮显示 |

**操作类型说明**：
- 买入：买入股票代币，USDT减少，股票代币增加
- 卖出：卖出股票代币，USDT增加，股票代币减少
- 充值：用户充值，对应币种增加
- 提现：用户提现，对应币种减少
- 利息：支付借款利息，USDT减少
- 分红：股票代币分红，USDT增加
- 拆股：股票拆股，代币数量增加
- 合股：股票合股，代币数量减少，USDT增加
- 代码变更：股票代码变更，代币数量调整
- 理财申购：申购理财产品，对应币种减少
- 理财赎回：赎回理财产品，对应币种增加
- 理财收益：理财产品收益，USDT增加
- 其他：其他资金变动

**展示规则**：
- 交易金额为正数时显示绿色，负数显示红色
- 手续费统一显示为USDT
- 计算余额：根据所有交易记录（买入、卖出、充值、提现等）计算出的理论余额
- 余额差：账户余额 - 计算余额，不为0时该行高亮显示（红色背景），用于对账检查

---

## 12. 理财管理

### 12.1 理财币种配置

#### 12.1.1 功能概述

管理理财产品支持的币种，包括年化收益率、申购限额等配置。

#### 12.1.2 币种列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **序号** | 序号 | 1, 2, 3... |
| **币种** | 理财币种 | TSLA/SOL... |
| **当前年化收益率** | 年化收益率 | 6.50%（百分比格式） |
| **最小申购金额** | 最小申购数量 | 0.01 |
| **状态** | 币种状态 | 启用/禁用 |
| **创建时间** | 创建时间 | YYYY-MM-DD HH:MM:SS |
| **更新时间** | 最后更新时间 | YYYY-MM-DD HH:MM:SS |
| **操作** | 编辑/下架 | 按钮 |

#### 12.1.3 添加币种

**添加流程**：
```
点击"添加币种"按钮
    ↓
弹出添加币种弹窗
    ├─ 币种（必填，下拉选择）
    ├─ 当前年化收益率（必填，如6.50）
    ├─ 最小申购金额（必填，如0.01）
    └─ 确认/取消按钮
    ↓
点击"确认添加"
    ↓
系统验证必填项
    ├─ 验证失败 → 显示错误提示
    └─ 验证成功 ↓
检查币种是否已存在
    ├─ 已存在 → 显示"币种已存在"
    └─ 不存在 ↓
保存币种配置
    ↓
显示"添加成功"
    ↓
关闭弹窗，刷新列表
```

#### 12.1.4 编辑币种

**编辑流程**：
```
点击"编辑"按钮
    ↓
弹出编辑弹窗
    ├─ 币种（只读）
    ├─ 当前年化收益率（可编辑）
    ├─ 最小申购金额（可编辑）
    └─ 确认/取消按钮
    ↓
修改配置
    ↓
点击"确认保存"
    ↓
系统验证
    ├─ 验证失败 → 显示错误提示
    └─ 验证成功 ↓
更新币种配置
    ↓
显示"保存成功"
    ↓
关闭弹窗，刷新列表
```

#### 12.1.5 下架币种

**下架流程**：
```
点击"下架"按钮
    ↓
弹出确认弹窗
    ├─ 显示币种
    └─ 确认/取消按钮
    ↓
点击"确认"
    ↓
更新币种状态为"禁用"
    ↓
显示"下架成功"
    ↓
刷新列表
```

**业务规则**：
- 下架后，用户无法申购该币种的理财产品
- 已申购的用户不受影响，可正常赎回

### 12.2 理财记录

#### 12.2.1 功能概述

查看用户理财产品申购、赎回和收益记录。

#### 12.2.2 搜索筛选

**筛选条件**：
- 用户ID：支持精确搜索
- 币种：支持模糊搜索
- 操作类型：全部/申购/赎回/收益
- 时间范围：开始日期 - 结束日期

#### 12.2.3 理财记录列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **用户ID** | 用户唯一标识 | U001 |
| **币种** | 理财币种 | TSLA/SOL... |
| **操作类型** | 操作类型 | 申购/赎回/收益 |
| **数量** | 申购/赎回/收益数量 | 保留4位小数 |
| **年化收益率** | 当时年化收益率 | 6.50% |
| **时间** | 操作时间 | YYYY-MM-DD HH:MM:SS |
| **状态** | 操作状态 | 已完成/确认中/失败 |

**状态说明**：
- 已完成：操作已成功完成，显示为黑色文本
- 确认中：操作正在确认中，显示为黄色文本
- 失败：操作失败，显示为红色文本

### 12.3 理财统计

#### 12.3.1 功能概述

查看理财产品统计数据，包括总申购金额、总赎回金额、收益等。

#### 12.3.2 统计维度

- 按币种统计：每个币种的总申购、总赎回、总收益
- 按时间统计：每日/每月统计数据
- 总览数据：平台总申购金额、总赎回金额、总收益

### 12.4 资金池

#### 12.4.1 功能概述

查看理财资金池信息，包括各币种资金池余额、利用率等。

#### 12.4.2 资金池列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **币种** | 理财币种 | TSLA/SOL... |
| **资金池余额** | 当前资金池余额 | 保留4位小数 |
| **总申购** | 累计申购金额 | 保留4位小数 |
| **总赎回** | 累计赎回金额 | 保留4位小数 |
| **利用率** | 资金池利用率 | 百分比格式 |
| **更新时间** | 最后更新时间 | YYYY-MM-DD HH:MM:SS |

### 12.5 资金池统计

#### 12.5.1 功能概述

查看资金池历史统计数据，包括资金池余额变化趋势等。

---

## 13. 运营管理

### 13.1 Banner管理

#### 13.1.1 功能概述

管理平台首页Banner，包括添加、编辑、删除、上下架等。

#### 13.1.2 Banner列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **序号** | 序号 | 1, 2, 3... |
| **标题** | Banner标题 | 文本 |
| **图片** | Banner图片 | 缩略图 |
| **链接** | 跳转链接 | URL |
| **排序** | 显示顺序 | 数字 |
| **状态** | Banner状态 | 启用/禁用 |
| **创建时间** | 创建时间 | YYYY-MM-DD HH:MM:SS |
| **操作** | 编辑/删除 | 按钮 |

#### 13.1.3 添加Banner

**添加流程**：
```
点击"添加Banner"按钮
    ↓
弹出添加弹窗
    ├─ 标题（必填）
    ├─ 图片（必填，上传）
    ├─ 链接（选填，URL格式）
    ├─ 排序（必填，数字）
    └─ 确认/取消按钮
    ↓
点击"确认添加"
    ↓
系统验证
    ├─ 验证失败 → 显示错误提示
    └─ 验证成功 ↓
保存Banner
    ↓
显示"添加成功"
    ↓
关闭弹窗，刷新列表
```

### 13.2 公告管理

#### 13.2.1 功能概述

管理平台公告，包括添加、编辑、删除、发布等。

#### 13.2.2 公告列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **序号** | 序号 | 1, 2, 3... |
| **标题** | 公告标题 | 文本 |
| **内容** | 公告内容 | 文本（显示前50字+省略号） |
| **类型** | 公告类型 | 系统公告/活动公告/其他 |
| **状态** | 公告状态 | 已发布/草稿/已下线 |
| **发布时间** | 发布时间 | YYYY-MM-DD HH:MM:SS |
| **操作** | 编辑/删除 | 按钮 |

#### 13.2.3 添加公告

**添加流程**：
```
点击"添加公告"按钮
    ↓
弹出添加弹窗
    ├─ 标题（必填）
    ├─ 内容（必填，富文本编辑器）
    ├─ 类型（必填，下拉选择）
    └─ 确认/取消按钮
    ↓
点击"确认添加"
    ↓
系统验证
    ├─ 验证失败 → 显示错误提示
    └─ 验证成功 ↓
保存公告（状态：草稿）
    ↓
显示"添加成功"
    ↓
关闭弹窗，刷新列表
```

#### 13.2.4 发布公告

**发布流程**：
```
点击"发布"按钮（草稿状态的公告）
    ↓
弹出确认弹窗
    └─ 确认/取消按钮
    ↓
点击"确认"
    ↓
更新公告状态为"已发布"
    ↓
显示"发布成功"
    ↓
刷新列表
```

### 13.3 用户反馈

#### 13.3.1 功能概述

查看和处理用户反馈，包括问题反馈、建议等。

#### 13.3.2 反馈列表

**表格字段**：

| 字段 | 说明 | 格式 |
|------|------|------|
| **序号** | 序号 | 1, 2, 3... |
| **用户ID** | 用户唯一标识 | U001 |
| **反馈类型** | 反馈类型 | 问题反馈/建议/其他 |
| **反馈内容** | 反馈内容 | 文本（显示前50字+省略号） |
| **提交时间** | 提交时间 | YYYY-MM-DD HH:MM:SS |
| **状态** | 处理状态 | 待处理/已处理/已忽略 |
| **操作** | 查看/处理 | 按钮 |

#### 13.3.3 处理反馈

**处理流程**：
```
点击"查看"或"处理"按钮
    ↓
弹出反馈详情弹窗
    ├─ 用户ID
    ├─ 反馈类型
    ├─ 反馈内容（完整内容）
    ├─ 提交时间
    ├─ 处理状态
    ├─ 处理备注（可编辑）
    └─ 保存/关闭按钮
    ↓
填写处理备注
    ↓
点击"保存"
    ↓
更新反馈状态为"已处理"
    ↓
显示"处理成功"
    ↓
关闭弹窗，刷新列表
```

---

## 14. 核心业务流程

### 14.1 用户禁用流程

```
管理员登录后台
    ↓
进入用户管理页面
    ↓
搜索用户
    ↓
点击"禁用交易"按钮
    ↓
弹出禁用确认弹窗
    ├─ 显示用户ID
    ├─ 输入禁用原因（必填）
    ├─ 输入身份验证器验证码（必填，6位）
    └─ 确认/取消按钮
    ↓
点击"确认禁用"
    ↓
系统验证验证码
    ├─ 验证失败 → 显示"验证码错误"，停留弹窗
    └─ 验证成功 ↓
保存禁用记录
    ├─ 记录用户ID
    ├─ 记录禁用原因
    ├─ 记录操作人
    ├─ 记录操作时间
    └─ 更新用户状态为"禁用交易"
    ↓
显示"禁用成功"
    ↓
关闭弹窗
    ↓
刷新用户列表
    ↓
用户状态显示为"禁用交易"
```

### 14.2 交易对下架流程

```
管理员登录后台
    ↓
进入交易对管理页面
    ↓
搜索交易对
    ↓
点击"下架"链接
    ↓
弹出下架确认弹窗
    ├─ 显示交易对代码
    ├─ 输入下架原因（必填）
    └─ 确认/取消按钮
    ↓
点击"确认"
    ↓
系统执行下架操作
    ├─ 步骤1：撤销该交易对的所有进行中订单
    │  ├─ 查询该交易对的所有待成交订单
    │  ├─ 系统自动撤销所有订单
    │  └─ 订单状态更新为"已撤销"，标记为"系统撤单"
    ├─ 步骤2：现货交易对市价全平用户该币种的全部负持仓
    │  ├─ 查询所有用户该币种的负持仓（做空持仓）
    │  ├─ 使用市价单买入平仓
    │  └─ 记录平仓操作日志
    ├─ 步骤3：更新交易对状态为"下架中"
    ├─ 步骤4：记录下架原因、操作人、操作时间
    └─ 步骤5：通知前端系统更新
    ↓
显示"下架成功"
    ↓
关闭弹窗
    ↓
刷新交易对列表
    ↓
交易对状态显示为"下架中"
    ↓
前端系统更新
    ├─ 行情自选页面、行情搜索页面不再展示该交易对
    ├─ 交易页面选择交易对时不能选择该交易对
    ├─ 交易页下方资产页，下架币种展示"已下架"标签，点击不再跳转
    ├─ 资产列表中，该币种标记"（已下架）"
    ├─ 计算资产估值时，此币种估值为0
    └─ 计算流动性时，此币种估值为0
```

### 14.3 订单成交明细查看流程

详细流程请参考 [7.2.3 成交明细](#723-成交明细) 章节。

---

## 15. 业务规则

### 15.1 用户管理规则

| 规则项 | 规则 | 备注 |
|--------|------|------|
| **用户搜索** | 支持用户ID精确搜索 | 不支持模糊搜索 |
| **禁用用户** | 禁用后无法交易，但可查看账户和提现 | 需要验证码验证 |
| **启用用户** | 需要验证码验证 | 记录操作日志 |
| **数据展示** | 金额保留4位小数，数量保留整数 | 统一格式 |

### 15.2 交易对管理规则

| 规则项 | 规则 | 备注 |
|--------|------|------|
| **手续费率** | taker和maker手续费率独立配置 | 格式：0.0008表示0.08% |
| **保证金率** | 做多和做空分别配置初始和维持保证金率 | 初始>维持 |
| **下架规则** | 下架时系统自动撤销所有进行中订单并全平负持仓，下架后用户无法新开仓但可以平仓（正持仓），前端不再展示该交易对，资产估值和流动性计算时该币种估值为0 | 保护用户权益，确保系统安全 |
| **上架规则** | 上架后立即生效，用户可正常交易 | 需要记录操作日志 |

### 15.3 订单管理规则

| 规则项 | 规则 | 备注 |
|--------|------|------|
| **订单搜索** | 支持多条件组合搜索 | 条件之间为AND关系 |
| **数据导出** | 导出当前筛选条件下的所有数据 | CSV格式 |
| **成交明细** | 显示订单所有成交记录 | 包含链上哈希 |
| **手续费显示** | 手续费统一显示为USDT | 带单位 |

### 15.4 充提管理规则

| 规则项 | 规则 | 备注 |
|--------|------|------|
| **充值状态** | 待确认/已确认/失败 | 链上确认后更新状态 |
| **提现状态** | 待确认/已确认/失败 | 需要人工审核 |
| **地址显示** | 完整地址显示 | 点击地址可复制到剪贴板 |
| **时间显示** | 未处理显示"-" | 已处理显示具体时间 |

### 15.5 资金管理规则

| 规则项 | 规则 | 备注 |
|--------|------|------|
| **余额计算** | 根据交易记录计算理论余额 | 用于对账 |
| **余额差** | 总余额 - 计算余额 | 不为0时高亮显示 |
| **异常检测** | 余额差不为0的记录标记为异常 | 需要人工核查 |
| **数据导出** | 支持导出对账数据 | CSV格式 |

---

## 16. 异常处理

### 16.1 网络异常

| 场景 | 提示信息 | 处理方式 |
|------|---------|---------|
| **搜索失败** | "网络连接失败，请重试" | 保留搜索条件，允许重新搜索 |
| **数据加载失败** | "数据加载失败，请刷新页面" | 显示刷新按钮 |
| **操作失败** | "操作失败，请重试" | 保留用户输入，允许重新操作 |

### 16.2 数据异常

| 场景 | 提示信息 | 处理方式 |
|------|---------|---------|
| **用户不存在** | "未找到相关用户" | 清空列表，显示空状态 |
| **订单不存在** | "订单不存在或已删除" | 关闭弹窗，刷新列表 |
| **数据为空** | "暂无数据" | 显示空状态提示 |

### 16.3 操作异常

| 场景 | 提示信息 | 处理方式 |
|------|---------|---------|
| **验证码错误** | "验证码错误，请重新输入" | 保留其他输入，仅清空验证码 |
| **必填项未填** | "请填写XXX" | 高亮显示未填项 |
| **权限不足** | "您没有权限执行此操作" | 隐藏或禁用操作按钮 |

---

## 17. 测试要点

### 17.1 功能测试

**用户管理**：
- [ ] 用户搜索功能正常
- [ ] 禁用用户功能正常，需要验证码
- [ ] 启用用户功能正常，需要验证码
- [ ] 用户列表数据展示正确

**交易对管理**：
- [ ] 添加交易对功能正常
- [ ] 编辑交易对功能正常
- [ ] 上架/下架功能正常
- [ ] 交易对列表数据展示正确

**订单管理**：
- [ ] 订单搜索功能正常
- [ ] 成交明细弹窗显示正确
- [ ] 逐笔成交记录数据正确
- [ ] 数据导出功能正常

**充提管理**：
- [ ] 充值记录查询正常
- [ ] 提现记录查询正常
- [ ] 详情查看功能正常
- [ ] 状态显示正确

### 17.2 异常测试

- [ ] 网络异常时提示正确
- [ ] 数据为空时显示空状态
- [ ] 验证码错误时提示正确
- [ ] 权限不足时隐藏操作按钮

### 17.3 边界测试

- [ ] 大量数据时列表加载正常
- [ ] 搜索无结果时显示提示
- [ ] 日期范围选择正确
- [ ] 分页功能正常

---

## 18. 术语表

| 术语 | 解释 |
|------|------|
| **用户ID** | 用户唯一标识，格式：U001, U002... |
| **订单ID** | 订单唯一标识，UUID格式或数字ID |
| **交易对** | 交易对代码，格式：AAPL-USDT |
| **taker手续费** | 市价单手续费率 |
| **maker手续费** | 限价单手续费率 |
| **初始保证金率** | 开仓时所需的保证金比例 |
| **维持保证金率** | 维持持仓所需的保证金比例 |
| **余额差** | 总余额与计算余额的差值，用于对账 |
| **链上哈希** | 区块链交易哈希值，用于查询链上记录 |

---

## 19. 更新记录

| 版本 | 日期 | 变更类型 | 变更内容 | 影响范围 | 更新人 |
|-----|------|---------|---------|---------|--------|
| v1.0 | 2025-01 | 初始 | 初始版本 | - | - |

---

## 📝 附录

### A. 数据导出格式

**CSV格式说明**：
- 编码：UTF-8
- 分隔符：逗号（,）
- 第一行：表头（字段名）
- 数据行：对应字段值

**导出字段**：
- 订单管理：包含所有表格字段
- 资金管理：包含所有表格字段
- 其他模块：根据实际需求确定导出字段

### B. 操作日志记录

**记录内容**：
- 操作人：管理员ID或用户名
- 操作时间：操作发生时间
- 操作类型：禁用用户、上架交易对、审核提现等
- 操作对象：用户ID、交易对代码、订单ID等
- 操作结果：成功/失败
- 操作备注：禁用原因、下架原因等

**日志查询**：
- 支持按操作人、操作类型、时间范围查询
- 支持导出操作日志

---

**文档完成！**

